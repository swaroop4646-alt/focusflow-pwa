<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FocusFlow â€” Habit & Mood Tracker</title>
  <meta name="description" content="A clean, offline-first habit & mood tracker. Private. No signup." />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#22c55e" />
  <link rel="icon" href="icons/icon-192.png" type="image/png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="stylesheet" href="styles.css" />
  <script defer src="app.js"></script>
  <!-- Chart.js and SheetJS (Excel) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.19.3/dist/xlsx.full.min.js"></script>
</head>
<body>
  <header class="container header">
    <div class="brand">
      <img src="icons/icon-192.png" alt="" class="logo" />
      <div>
        <h1>FocusFlow</h1>
        <p class="tagline">Simple, private habit & mood tracker. Works offline. Installable.</p>
      </div>
    </div>
    <div class="header-actions">
      <button id="btnTheme" title="Toggle theme">ğŸŒ— Theme</button>
      <div id="installPrompt" class="install hidden">
        <button id="btnInstall">Install App</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div class="row">
        <h2>Today <span id="todayLabel"></span></h2>
        <div class="backup">
          <button id="btnExportXLSX" title="Download an Excel backup (.xlsx)">Export Excel</button>
          <label class="import">
            <input type="file" id="fileImportXLSX" accept=".xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
            Import Excel
          </label>
        </div>
      </div>
      <div class="add">
        <input id="habitName" type="text" placeholder="Add a habit (e.g., Drink water)" />
        <button id="btnAdd">Add</button>
      </div>
      <ul id="habitList" class="list" aria-live="polite"></ul>
      <p class="muted small">Tip: drag habits up/down to reorder â€¢ tap âœï¸ to rename â€¢ tap â€œMark doneâ€ to keep your streak ğŸ”¥</p>
    </section>

    <section class="grid">
      <section class="card">
        <h2>Mood</h2>
        <div id="moodButtons" class="moods" role="group" aria-label="Select your mood for today">
          <button data-mood="1" title="Very low">ğŸ˜</button>
          <button data-mood="2" title="Low">â˜¹ï¸</button>
          <button data-mood="3" title="Okay">ğŸ˜</button>
          <button data-mood="4" title="Good">ğŸ™‚</button>
          <button data-mood="5" title="Great">ğŸ˜„</button>
        </div>
        <p id="moodStatus" class="muted">No mood logged yet today.</p>
      </section>

      <section class="card">
        <h2>Last 30 days</h2>
        <canvas id="historyChart" width="600" height="240" aria-label="Last 30 days completion history" role="img"></canvas>
      </section>
    </section>

    <section class="card">
      <h2>Settings</h2>
      <div class="settings">
        <div class="setting">
          <label for="reminderTime">Daily reminder time</label>
          <input id="reminderTime" type="time">
          <label class="switch"><input id="reminderEnabled" type="checkbox"><span>Enable</span></label>
          <button id="btnAskNotification">Allow notifications</button>
        </div>
        <p class="muted small">Reminders show while the app is open. For full push notifications, youâ€™d need a server (future â€œProâ€).</p>
      </div>
    </section>

    <section class="card">
      <h2>Tips</h2>
      <ul class="tips">
        <li>Works offline. Install to your phone or desktop.</li>
        <li>Use <strong>Export Excel</strong> to back up your data. <strong>Import Excel</strong> to restore.</li>
        <li>Toggle <strong>Theme</strong> anytime.</li>
      </ul>
    </section>
  </main>

  <footer class="container footer">
    <div class="links">
      <a href="privacy.html">Privacy</a>
      <a href="terms.html">Terms</a>
    </div>
    <span>Â© 2025 FocusFlow</span>
  </footer>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(console.error);
      });
    }
  </script>
</body>
</html>
